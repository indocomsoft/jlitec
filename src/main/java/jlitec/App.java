/*
 * This Java source file was generated by the Gradle 'init' task.
 */

package jlitec;

import net.sourceforge.argparse4j.ArgumentParsers;
import net.sourceforge.argparse4j.inf.ArgumentParserException;

public class App {
  /**
   * Main class of the app.
   *
   * @param args command-line arguments
   */
  public static void main(String[] args) {
    var parser =
        ArgumentParsers.newFor("jlitec")
            .build()
            .defaultHelp(true)
            .description("Compiler for the JLite language.");
    var subparsers = parser.addSubparsers().help("sub-command help").dest("subcommand");
    var lexerParser =
        subparsers
            .addParser("lexer")
            .help("Show the result of lexing the source code for debugging.");
    lexerParser.addArgument("filename").type(String.class).help("input filename");
    try {
      var parsed = parser.parseArgs(args);
      switch (parsed.<String>get("subcommand")) {
        case "lexer" -> jlitec.generated.Lexer.main(new String[] {parsed.get("filename")});
        default -> throw new RuntimeException("Unrecognized subcommand");
      }
    } catch (ArgumentParserException e) {
      parser.handleError(e);
    }
  }
}
